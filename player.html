<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6XVHNP2C9G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-6XVHNP2C9G');
    </script>
    
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta name="google-adsense-account" content="ca-pub-8123448291547296">

    <title>Animeverse | Premium HD Hindi Dubbed Anime</title>
    <meta name="description" content="Animeverse par dekhiye premium Hindi dubbed anime series aur movies HD quality mein. Latest episodes, trending movies, aur fast streaming ka maza lein bilkul free.">
    
    <link rel="icon" type="image/png" href="/Gemini_Generated_Image_u4n26yu4n26yu4n2.png">
    <link rel="apple-touch-icon" href="/Gemini_Generated_Image_u4n26yu4n26yu4n2.png">
    
    <meta property="og:image" content="https://animeverse-web.github.io/Gemini_Generated_Image_u4n26yu4n26yu4n2.png">
    <meta name="twitter:image" content="https://animeverse-web.github.io/Gemini_Generated_Image_u4n26yu4n26yu4n2.png">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Quicksand:wght@300;500&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>

    <style>
        :root { --primary-color: #f47e21; --secondary-color: #ff0000; --accent-glow: 0 0 15px rgba(244, 126, 33, 0.4); }
        body { font-family: 'Poppins', sans-serif; background: #000 url('./IMG_20250528_184959.jpg') no-repeat center center fixed; background-size: cover; color: #fff; margin: 0; padding: 0; padding-top: 85px; overflow-x: hidden; scroll-behavior: smooth; }
        header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: rgba(0, 0, 0, 0.95); border-bottom: 2px solid var(--primary-color); position: fixed; top: 0; left: 0; width: 100%; z-index: 2000; box-sizing: border-box; }
        .logo-container img { height: 40px; border-radius: 8px; filter: drop-shadow(var(--accent-glow)); }
        .menu-btn, .search-trigger { font-size: 1.6rem; cursor: pointer; color: #fff; background: none; border: none; outline: none; transition: 0.3s; }
        #sideNav { position: fixed; left: 0; top: 0; width: 260px; height: 100%; background: #0a0a0a; z-index: 3000; padding: 30px 20px; transform: translateX(-100%); transition: 0.4s; box-sizing: border-box; }
        #sideNav.open { transform: translateX(0); box-shadow: 10px 0 50px #000; }
        #sideNav a { display: block; color: #eee; padding: 12px; text-decoration: none; font-size: 15px; border-radius: 8px; margin-bottom: 5px; }
        #sideNav a:hover { background: var(--primary-color); color: white; }
        .close-btn { text-align: right; font-size: 1.5rem; cursor: pointer; color: var(--primary-color); margin-bottom: 20px; }
        .search-section { position: fixed; top: 60px; left: 50%; transform: translateX(-50%) translateY(-20px); width: 100%; max-width: 600px; z-index: 1500; opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); padding: 0 15px; box-sizing: border-box; }
        .search-section.active { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); max-height: 120px; padding: 15px 15px; }
        .search-box { display: flex; background: #111; border: 2px solid var(--primary-color); border-radius: 30px; overflow: hidden; box-shadow: 0 0 15px rgba(244, 126, 33, 0.5); }
        .search-box input { flex: 1; background: transparent; border: none; color: #fff; padding: 12px 40px 12px 20px; outline: none; font-size: 14px; width: 100%; }
        .go-btn { background: var(--primary-color); border: none; color: white; padding: 0 20px; font-weight: 800; cursor: pointer; }
        #suggestions { position: absolute; top: 100%; left: 15px; right: 15px; background: rgba(15, 15, 15, 0.98); backdrop-filter: blur(10px); border-radius: 15px; border: 1px solid var(--primary-color); max-height: 250px; overflow-y: auto; display: none; margin-top: 10px; z-index: 9999; }
        #newlyContainer { display: flex; gap: 12px; overflow-x: auto; padding: 10px 5px; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; }
        #newlyContainer::-webkit-scrollbar { display: none; }
        .ep-card { flex: 0 0 calc(55% - 10px); scroll-snap-align: start; background: rgba(15,15,15,0.95); border-radius: 10px; overflow: hidden; text-decoration: none; color: white; border: 1px solid rgba(255,255,255,0.1); position: relative; }
        .ep-card img { width: 100%; aspect-ratio: 16 / 9; object-fit: cover; }
        .ep-badge { position: absolute; top: 8px; left: 8px; background: var(--primary-color); font-size: 9px; padding: 2px 8px; border-radius: 4px; font-weight: 900; z-index: 10; }
        .ep-title { padding: 8px 5px; font-size: 0.8rem; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 600; }
        .hero { padding: 15px; width: 100%; box-sizing: border-box; }
        .hero-card { background: #111; background-size: cover; background-position: center; height: 170px; border-radius: 12px; border: 1px solid var(--primary-color); display: flex; align-items: center; padding: 15px 20px; position: relative; overflow: hidden; }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(to right, rgba(0,0,0,0.95) 45%, transparent); z-index: 1; }
        .hero-content { position: relative; z-index: 2; width: 100%; }
        .hero-tag { background: var(--secondary-color); padding: 2px 8px; border-radius: 4px; font-size: 8px; font-weight: 800; text-transform: uppercase; }
        .hero-card h1 { margin: 4px 0; font-size: 1.1rem; font-weight: 800; text-transform: uppercase; line-height: 1.2; } 
        .hero-btn { display: inline-block; background: var(--primary-color); color: #fff; padding: 7px 16px; border-radius: 20px; text-decoration: none; font-weight: bold; margin-top: 10px; font-size: 9px; }
        .container { padding: 10px; max-width: 1100px; margin: 0 auto; }
        h2 { border-left: 4px solid var(--primary-color); padding-left: 10px; margin: 25px 0 15px; font-size: 0.95rem; text-transform: uppercase; }
        .anime-grid { display: grid; gap: 10px; grid-template-columns: repeat(3, 1fr); }
        .anime-card { background: rgba(15,15,15,0.95); border-radius: 8px; overflow: hidden; text-decoration: none; color: white; border: 1px solid rgba(255,255,255,0.1); position: relative; transition: 0.3s; }
        .anime-card img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
        .anime-title { padding: 6px 4px; font-size: 0.7rem; font-weight: 600; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        footer { background: #000; padding: 40px 20px 100px; text-align: center; border-top: 1px solid #1a1a1a; margin-top: 40px; }
        .bottom-actions { position: fixed; bottom: 0; width: 100%; display: flex; gap: 8px; padding: 10px; background: rgba(0,0,0,0.95); z-index: 1001; box-sizing: border-box; }
        .btn-action { flex: 1; padding: 13px; border-radius: 8px; text-align: center; text-decoration: none; font-weight: bold; color: #fff; font-size: 0.75rem; }
        #comingSoonModal { display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.85); backdrop-filter: blur(8px); align-items:center; justify-content:center; }
    </style>
</head>
<body>

<header>
    <button class="menu-btn" onclick="document.getElementById('sideNav').classList.add('open')">‚ò∞</button>
    <div class="logo-container"><img src="/Gemini_Generated_Image_u4n26yu4n26yu4n2.png" alt="Logo"></div>
    <button class="search-trigger" onclick="toggleSearch()">üîç</button>
</header>

<nav id="sideNav">
    <div class="close-btn" onclick="document.getElementById('sideNav').classList.remove('open')">‚úï</div>
    <a href="./index.html">üè† Home</a>
    <a href="./about us.html">‚ÑπÔ∏è About Us</a>
    <a href="./contact us.html">üìû Contact Us</a>
    <a href="schedule.html">üìÖ Schedule</a>
</nav>

<div class="search-section" id="searchContainer">
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search anime..." autocomplete="off">
        <button class="go-btn" onclick="triggerSearch()">GO</button>
    </div>
    <div id="suggestions"></div>
</div>

<div class="hero" id="heroSection">
    <div class="hero-card" id="heroCard">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <span class="hero-tag">üî• Trending</span>
            <h1 id="heroTitle">Loading...</h1>
            <p id="heroDesc">Fetching world's most popular anime...</p>
            <a href="#" id="heroBtn" class="hero-btn">WATCH HD</a>
        </div>
    </div>
</div>

<div class="container">
    <section id="newlySection" style="display:none;">
        <h2 style="color: #00d2ff; border-left-color: #00d2ff;">‚ú® Newly Episode Added</h2>
        <div id="newlyContainer"></div>
    </section>

    <section id="latestSection">
        <h2>Latest series</h2>
        <div class="anime-grid" id="latestContainer"></div>
    </section>
    
    <section id="popularSection">
        <h2 id="popularHeading">Popular Anime</h2>
        <div class="anime-grid" id="popularContainer"></div>
    </section>

    <section id="trendingSection">
        <h2>Trending Anime</h2>
        <div class="anime-grid" id="trendingContainer"></div>
    </section>

    <section id="movieSection">
        <h2>Movies</h2>
        <div class="anime-grid" id="movieContainer"></div>
    </section>
</div>

<div id="comingSoonModal">
    <div style="background:#111; border:2px solid var(--primary-color); padding:30px; border-radius:20px; text-align:center;">
        <h2 style="color:var(--primary-color);">COMING SOON</h2>
        <p>Processing Hindi episodes shortly!</p>
        <button onclick="closeModal()" class="hero-btn">CLOSE</button>
    </div>
</div>

<footer>
    <div style="font-size: 2rem; font-weight: 800; color: var(--primary-color);">ANIMEVERSE</div>
    <p>¬© 2026 ANIMEVERSE</p>
</footer>

<div class="bottom-actions">
    <a href="https://youtube.com/@animia-g6q" class="btn-action" style="background:#ff0000;">YOUTUBE</a>
    <a href="https://t.me/animeverse648" class="btn-action" style="background:#0088cc;">TELEGRAM</a>
</div>

<script>
const firebaseConfig = { apiKey: "AIzaSyAe5XKQlowY_AroKkQ80SeAYPqLnF02KoE", databaseURL: "https://animeverse-9eada-default-rtdb.firebaseio.com/", projectId: "animeverse-9eada", appId: "1:296666771306:web:df732df90b1e5e9108ff13" };
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const TMDB_API_KEY = 'eef0f9c16ca61d6c843e7d43ddc5e1d8';
const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTvGZARZP6Mg8n9IzHbyJbA0IFLl-R092WC4j4iNEuoMix0WFs5am5XTElypkz-Fo77IpAhNFssDwZ4/pub?output=csv';

let animeData = [];

// FIX: LINK GENERATOR (Single 's' fix)
db.ref('newly_added_section').on('value', (snap) => {
    const container = document.getElementById('newlyContainer');
    const section = document.getElementById('newlySection');
    container.innerHTML = ''; 
    if (snap.exists()) {
        section.style.display = 'block';
        snap.forEach((child) => {
            const item = child.val();
            const card = document.createElement('a');
            card.className = 'ep-card';
            
            // Yahan badlav kiya gaya hai:
            let sNum = item.season.toString().toLowerCase().replace('s', ''); // Sirf number bachega
            card.href = `player.html?id=${item.slug}&s=${sNum}&ep=${item.ep}`;
            
            card.innerHTML = `
                <div class="ep-badge">EPISODE ${item.ep}</div>
                <img src="${item.image || 'https://via.placeholder.com/500x281'}" loading="lazy">
                <div class="ep-title">${item.name}</div>
            `;
            container.appendChild(card);
        });
    } else { section.style.display = 'none'; }
});

// TMDB & Grids Logic
async function fetchAnimeData(title) {
    try {
        const res = await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${TMDB_API_KEY}&query=${encodeURIComponent(title)}`);
        const data = await res.json();
        if (data.results?.[0]) {
            const a = data.results[0];
            return { title: a.name, poster: 'https://image.tmdb.org/t/p/w500' + a.poster_path, rating: a.vote_average?.toFixed(1) || 'N/A' };
        }
    } catch (e) { return null; }
}

async function loadDataFromSheet() {
    try {
        const response = await fetch(SHEET_URL);
        const csvText = await response.text();
        const rows = csvText.split(/\r?\n/).slice(1);
        animeData = rows.map(row => {
            const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
            return { title: cols[0]?.replace(/"/g, '').trim(), link: cols[1]?.replace(/"/g, '').trim(), category: cols[2]?.replace(/"/g, '').trim().toLowerCase() || 'latest' };
        }).filter(item => item.title);
        renderGrids();
        loadHero();
    } catch (e) { console.error(e); }
}

async function renderGrids() {
    const sections = { 'latest': document.getElementById('latestContainer'), 'popular': document.getElementById('popularContainer'), 'trending': document.getElementById('trendingContainer'), 'movies': document.getElementById('movieContainer') };
    for (const a of animeData) {
        const d = await fetchAnimeData(a.title);
        if (d) {
            const card = document.createElement('a');
            card.className = 'anime-card';
            card.href = a.link;
            card.innerHTML = `<img src="${d.poster}"><div class="anime-title">${d.title}</div>`;
            if (sections[a.category]) sections[a.category].appendChild(card);
        }
    }
}

function toggleSearch() { document.getElementById('searchContainer').classList.toggle('active'); }
function closeModal() { document.getElementById('comingSoonModal').style.display = 'none'; }
function showComingSoon() { document.getElementById('comingSoonModal').style.display = 'flex'; }

loadDataFromSheet();
</script>
</body>
</html>
